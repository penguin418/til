# 웹 API디자인

직관적인 API만드는 법, API 업그레이드의 어려움, 그럼에도 업그레이드 하는 방법, 처음부터 확장 가능한 API를 설계하는 방법 등에 대해 다루고 있다

## API URL 설계

1. 리소스 간 관계 식별

    API 목표 캔버스 만들기 (6하원칙 + 목표 정리)

2. 액션과 파라미터, 반환값 정의

    목표에서 명사, 동사 추출 → 명사를 리소스로, 동사를 액션으로 식별

3. 리소스 경로 디자인

    규칙을 만들고, 규칙대로

4. HTTP를 사용한 리퀘스트 액션 설계
5. 
    CRUD → POST, GET, PUT, DELETE 등으로 변환

## API 데이터 설계

목표: 내부동작을 노출하지 않으면서 컨슈머가 데이터를 이해할 수 있도록 디자인

1. 컨셉 디자인

    모든 속성 파악

    이름, 타입, 필수여부, 부가설명을 정리

2. 리스폰스 디자인

    컨슈머 입장에서 필요한 필드를 만들기 

    e.g.1 단어장 조회 시 모든 필드

    e.g.2 단어장 검색 시 이름만 (+a)

3. 리스폰스 파라미터 디자인

    요청에 필요한 파라미터를 구성

4. 데이터 소스 검증

    데이터소스에서 파라미터를 제공할 수 있는 지 확인

## 제약사항

- 클라이언트 서버 분리 제약사항

    서버의 동작방식을 분리해서 생각해야 함

- 스테이트리스 제약사항

    리퀘스트를 처리하는 데 필요한 모든 정보가 리퀘스트에 들어있어야 함

    컨텍스트를 사용하면 안됨

- 캐시 가능성 제약사항

    리스폰스는 저장가능 여부와 기간을 표시해야 함

- 레이어드 시스템 제약사항

    오직 단 하나의 api 레이어만 노출되어야 함

- 코드 온 디멘드 제약사항

    클라이언트에 실행가능한 카드를 전송할 수도(선택적) 있음

- 유니폼 인터페이스 제약사항

    표준 메소드를 통해서만 이뤄져야함

##  직관적인 API

-  직관적인 입력과 출력

    - 명확한 이름

    - 이해하기 쉬운 데이터 포맷

- 유의미한 피드백

    - 해결방법을 알려주는 에러 피드백
  
- 예측가능한 동작

    - 일관성 있는 네이밍

##  체계적인 API

- 데이터 정렬

- 깊이 제한
  

## 안전한 API

- 접근 권한 처리

- 민감한 데이터 처리

- 민감한 데이터가 필요한 경우 엔트리분리, 권한분리

- 에러피드백 제대로 주기 

https://www.notion.so/REST-API-9b4e911cd60843a79e89a1d854abea1a